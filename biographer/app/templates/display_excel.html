{% extends "upload_form.html" %}
{% block content %}
{{super()}}
    <body>
        <h1>Excel Data</h1>
        File Uploaded: {{filename}}
        {% for table in tables %}
            {{ table|safe }}
        {% endfor %}
    
        <h1>Analyze Excel File</h1>
        <form id="transformation" action="{{ url_for('main.transform_data') }}" method="post">
            <input type="hidden" name="file_path" value="{{ file_path }}">
            
            <label for="transform">Transform:</label>
            <select name="transformation" id="transform">
                <option value=""></option>
                <option value="normalize">Normalize</option>
                <option value="transform">Transform</option>
                <option value="transform_concentrations">Transform Concentrations</option>
                <option value="prune">Prune</option>
                <option value="area_under_curve">Area Under Curve</option>
                <option value="fraction_of_total">Fraction of Total</option>
                <option value="transpose">Transpose</option>
                <!-- Add more transformation options as needed -->
            </select>
            <button type="submit">Apply Transformation</button>
            <br><br>
        </form>

        <h2>Transformed Data</h2>
        {% if transformed_df %}
        <!-- Display transformed DataFrame -->
        {{ transformed_df|safe }}
        {% else %}
        <p>No transformed data available.</p>
        {% endif %}

        <hr>

        <!-- Tests for Nominal Variables -->
        <form id="test_nominal" action="{{ url_for('main.perform_nominal_test') }}" method="post">
            <input type="hidden" name="file_path" value="{{ file_path }}">
            
            <label for="testNominal">Tests for Nominal Variables:</label>
            <select name="test_nominal" id="testNominal">
                <option value=""></option>
                <option value="exact_test_of_goodness_of_fit">Exact Test of Goodness-of-Fit</option>
                <option value="power_analysis">Power Analysis</option>
                <option value="chi_square_test_of_goodness_of_fit">Chi-Square Test of Goodness-of-Fit</option>
                <option value="g_test_of_goodness_of_fit">G-Test of Goodness-of-Fit</option>
                <option value="chi_square_test_of_independence">Chi-Square Test of Independence</option>
                <option value="g_test_of_independence">G-Test of Independence</option>
                <option value="fishers_exact_test">Fisher's Exact Test</option>
                <option value="cochran_mantel_haenszel_test">Cochran-Mantel-Haenszel Test</option>
            </select>
            <button type="submit">Submit</button>
            <br><br>
        </form>

        <!-- Tests for One Measurement Variable -->
        <form id="test_one_measurement" action="{{ url_for('main.perform_one_measurement_test') }}" method="post">
            <input type="hidden" name="file_path" value="{{ file_path }}">
            
            <label for="testOneMeasurement">Tests for One Measurement Variable:</label>
            <select name="test_one_measurement" id="testOneMeasurement">
                <option value=""></option>
                <option value="one_sample_t_test">One-Sample t-Test</option>
                <option value="two_sample_t_test">Two-Sample t-Test</option>
                <option value="homoscedasticity">Homoscedasticity</option>
                <option value="one_way_anova">One-Way ANOVA</option>
                <option value="kruskal_wallis_test">Kruskal-Wallis Test</option>
                <option value="nested_anova">Nested ANOVA</option>
                <option value="two_way_anova">Two-Way ANOVA</option>
                <option value="paired_t_test">Paired t-Test</option>
                <option value="wilcoxon_signed_rank_test">Wilcoxon Signed-Rank Test</option>
            </select>
            <button type="submit">Submit</button>
            <br><br>
        </form>

        <!-- Tests for Multiple Measurement Variables -->
        <form id="test_multiple_measurement" action="{{ url_for('main.perform_multiple_measurement_test') }}" method="post">
            <input type="hidden" name="file_path" value="{{ file_path }}">
            
            <label for="testMultipleMeasurement">Tests for Multiple Measurement Variables:</label>
            <select name="test_multiple_measurement" id="testMultipleMeasurement">
                <option value=""></option>
                <option value="linear_regression_and_correlation">Linear Regression and Correlation</option>
                <option value="spearman_rank_correlation">Spearman Rank Correlation</option>
                <option value="polynomial_regression">Polynomial Regression</option>
                <option value="analysis_of_covariance">Analysis of Covariance</option>
                <option value="multiple_regression">Multiple Regression</option>
                <option value="simple_logistic_regression">Simple Logistic Regression</option>
                <option value="multiple_logistic_regression">Multiple Logistic Regression</option>
            </select>
            <button type="submit">Submit</button>
            <br><br>
        </form>

        <hr>

        <!-- Display test results -->
        <h2>Test Results</h2>
        {% if test_results %}
        <ul>
            {% for test, result in test_results.items() %}
            <li><strong>{{ test }}</strong>: {{ result }}</li>
            {% endfor %}
        </ul>
        {% else %}
        <p>No test results available.</p>
        {% endif %}
    </body>
</html>

{% endblock %}
